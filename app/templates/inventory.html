{% extends "bootstrap/base.html" %}

{% block head %}
<title>Inventory</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<script src="https://kit.fontawesome.com/d906718c2b.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
	integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
	crossorigin="">
</script>
{{super()}}
{% endblock %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""/>
{% endblock %}

{% block content %}
<div class="container">
  <h1>ENEA Heritage Science Internship 2021</h1>
  <h2>PoC of ENEA heritagescience platform</h2>  
  <hr>
 <div class="row">
    <div class="col-md-4">
      <h3>Inventory</h3>
    </div>
    <div class="col-md-4">
      <a href="{{ url_for('index') }}"><button type="button" class="btn btn-success">Back</button></a>
    </div>
  </div>
  <div class="row">
    <div id="map" style="width: 100%; 
			 height: 400px;"></div>
    <script src="{{ url_for('static', filename='js/basemap.js') }}"></script>

  </div>
  <div class="row">
    <table class="table table-striped table-hover">
      <thead class="thead-dark">
	<tr>
	  <th scope="col">Title</th>
	  <th scope="col">Project</th>
	  <th scope="col">Year</th>
          <th scope="col">Latitude</th>
          <th scope="col">Longitude</th>
	  <th scope="col" style="text-align:center">Object Type</th>
	  <th scope="col">View</th>
	</tr>
      </thead>
      <tbody>
	{% for r in result %}
	<script type="text/javascript">
	  marker = new L.marker([{{ r['coordinates']['latitude'] }}, {{ r['coordinates']['longitude'] }}]).addTo(mymap);
	</script>
	<tr>
	  <td>{{ r['title'] }}</td>
	  <td>{{ r['project'] }}</td>
	  <td>{{ r['year'] }}</td>
          <td>{{ r['coordinates']['latitude'] }}</td>
          <td>{{ r['coordinates']['longitude'] }}</td>
	  {% if r['objtype'] == '3dmodel' %}
	  <td style="text-align:center"><i class="fas fa-cube fa-2x"></i></td>
	  <td><a target="_blank" href="3dviewer/assembler.php?oid={{ r['ID'] }}"><button type="button" class="btn btn-dark">View</button></a></td>
	  {% elif r['objtype'] == 'image'  %}
	  <td style="text-align:center"><i class="fas fa-file-image fa-2x"></i></td>
	  <td><a target="_blank" href="store/{{ r['ID'] }}.jpeg"><button type="button" class="btn btn-dark">View</button></a></td>
	  {% elif r['objtype'] == 'publication' %}
	  <td style="text-align:center"><i class="fas fa-file fa-2x"></i></td>
	  <td><a target="_blank" href="{{ r['ID'] }}.{{ r['extension'] }}"><button type="button" class="btn btn-dark">View</button></a></td>
	  {% endif %}
	</tr>
	{% endfor %}
      </tbody>
    </table>
  </div>
  <hr>
  <p><a href="{{ url_for('index') }}">Back</a></p>
</div>
</html>
{% endblock %}
