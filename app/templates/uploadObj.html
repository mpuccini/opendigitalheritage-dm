{% extends "layout.html" %}

{% block head %}
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
	integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
	crossorigin=""></script>
{{super()}}
{% endblock %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""/>
{% endblock %} 

{% block content %}
<div class="container">
  <h3>Upload new {{ obj }}</h3>
  <div class="row">
    <div class="col s12 m6">
      <h4>Metadata</h4>
      <form method="post" action="" enctype="multipart/form-data" validate> 
	{{ form.csrf_token() }}
	<div class="row">
          <div class="input-field col s6">
	    {{ form.title.label }}
	    {{ form.title(class_="active validate")|safe }} 
          </div>
          <div class="input-field col s6">
	    {{ form.author.label }}
	    {{ form.author(class_="active validate")|safe }} 
          </div>
          <div class="input-field col s12">
	    {{ form.description.label }}
	    {{ form.description(class_="materialize-textarea")|safe }}
          </div>
          <div class="input-field col s6">
	    {{ form.project.label }}
	    {{ form.project(class_="active validate")|safe }} 
          </div>
          <div class="input-field col s6">
	    {{ form.year.label }}
	    {{ form.year(class_="active validate")|safe }} 
          </div>
          <div class="input-field col s12">
	    {{ form.coordinates.label }}
	    {{ form.coordinates(class_="active validate")|safe }} 
	    <span class="helper-text" 
		  data-error="wrong" 
		  data-success="right">
	      Paste from clipboard
	    </span>
          </div>
          <div class="input-field col s12">
	    {{ form.license_url.label }}
	    {{ form.license_url(class_="active validate")|safe }} 
          </div>
	  <div class="file-field input-field col s12">
	    <div class="btn">
	      <span>File</span>
	      {{ form.img()|safe }} 
	    </div>
	    <div class="file-path-wrapper">
	      <input class="file-path validate" type="text">
	    </div>
	  </div> 
	  <button class="btn waves-effect waves-light" type="submit">
	    Submit
	    <i class="material-icons right">send</i>
	  </button>
	</div>
      </form> 
    </div>
    <div class="col s12 m6">
      <h4>Add Position</h4>
      <p>Navigate and point on map the artifact position</p>
      <div id="map" style="position: relative;
			   width: 100%; 
			   height: 600px;">
      </div>     
    </div>
  </div>
</div>
{% endblock %}


{% block scripts %}
<script src="{{ url_for('static', filename='js/getcoord.js') }}"></script>
<script>
  $('#description').val('');
  M.textareaAutoResize($('#description'));
</script>
{% endblock %}
